{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _querystring = require('querystring');\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nexports['default'] = {\n  callbacks: [],\n  appended: false,\n  load: function load(params, callback) {\n    var index = this.callbacks.push(callback);\n\n    if (googleMapsExists()) {\n      setTimeout(this.fireCallbacks.bind(this));\n    } else {\n      if (!this.appended) {\n        window.mapsCallback = this.mapsCallback.bind(this);\n        this.appendScript(params);\n      }\n    }\n\n    return index;\n  },\n  getSrc: function getSrc(params) {\n    var src = 'https://maps.googleapis.com/maps/api/js';\n    src += '?callback=mapsCallback&';\n    src += _querystring2['default'].stringify(params);\n    return src;\n  },\n  appendScript: function appendScript(params) {\n    var src = this.getSrc(params);\n    var script = document.createElement('script');\n    script.setAttribute('src', src);\n    document.head.appendChild(script);\n    this.appended = true;\n  },\n  mapsCallback: function mapsCallback() {\n    window.mapsCallback = undefined;\n    this.fireCallbacks();\n  },\n  fireCallbacks: function fireCallbacks() {\n    this.callbacks.forEach(function (callback) {\n      return callback();\n    });\n    this.callbacks = [];\n  },\n  removeCallback: function removeCallback(index) {\n    this.callbacks.splice(index - 1, 1);\n  }\n};\n\nvar googleMapsExists = function googleMapsExists() {\n  return typeof window.google === 'object' && typeof window.google.maps === 'object';\n};\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}